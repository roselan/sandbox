<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ship ETA</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        .early { color: red; }
    </style>
</head>
<body>
    <h1>Suitable Ships</h1>
    <div id="filters"></div>
    <table>
        <thead>
            <tr><th>Ship</th><th>Load Port</th><th>ETA</th></tr>
        </thead>
        <tbody id="ship-list"></tbody>
    </table>

    <script>
        // Parse query parameters
        const params = new URLSearchParams(window.location.search);
        const loadPort = params.get('loadPort');
        const laycanStr = params.get('laycan');
        const laycanDate = new Date(laycanStr);
        const filterLaycan = new Date(laycanDate);
        filterLaycan.setDate(filterLaycan.getDate() - 5);

        // Sample ship data
        const ships = [
            { name: 'MV Alpha', loadPort: 'Port Hedland', eta: '2023-09-10' },
            { name: 'MV Beta', loadPort: 'Port Hedland', eta: '2023-09-16' },
            { name: 'MV Gamma', loadPort: 'Richards Bay', eta: '2023-09-18' },
            { name: 'MV Delta', loadPort: 'New Orleans', eta: '2023-09-22' }
        ];

        document.getElementById('filters').textContent = `Load Port: ${loadPort} | Laycan: ${filterLaycan.toISOString().split('T')[0]}`;

        const shipList = document.getElementById('ship-list');
        ships.filter(ship => ship.loadPort === loadPort && new Date(ship.eta) >= filterLaycan)
            .forEach(ship => {
                const tr = document.createElement('tr');
                if (new Date(ship.eta) < laycanDate) {
                    tr.classList.add('early');
                }
                tr.innerHTML = `<td>${ship.name}</td><td>${ship.loadPort}</td><td>${ship.eta}</td>`;
                shipList.appendChild(tr);
            });
    </script>
</body>
</html>
